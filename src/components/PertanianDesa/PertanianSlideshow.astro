---
// src/components/PertanianDesa/PertanianSlideshow.astro
import '../../Global/Slideshow/slideshow.css';
---

<main id="main-content-area"></main>

<style>
  /* Pertahankan style layout section, tapi hapus style slideshow internal */
  :global(.program-section) { padding: 40px 0; border-bottom: 1px solid #eee; }
  :global(.program-title-wrapper) { padding: 0 30px 20px 30px; }
  :global(.program-title) { border-left: 5px solid #f9a825; padding-left: 15px; font-size: 1.3rem; margin-bottom: 0; }
  
  /* Override Warna Dot Aktif Khusus Pertanian (Kuning/Oranye) */
  :global(#main-content-area) {
      --dot-active: #f9a825;
  }
</style>

<script>
  import { GlobalSlideshow } from '../../Global/Slideshow/GlobalSlideshow.js';

  // DATA CONFIGURATION
  const commodityData = {
      tebu: {
          title: "Perkebunan Tebu",
          images: [
              "/Imagery/Pertanian Desa/Tebu/1_Tebu.webp",
              "/Imagery/Pertanian Desa/Tebu/2_Tebu.webp",
              "/Imagery/Pertanian Desa/Tebu/3_Tebu.webp",
              "/Imagery/Pertanian Desa/Tebu/4_Tebu.webp",
              "/Imagery/Pertanian Desa/Tebu/5_Tebu.webp",
              "/Imagery/Pertanian Desa/Tebu/6_Tebu.webp",
              "/Imagery/Pertanian Desa/Tebu/7_Tebu.webp"
          ]
      },
      singkong: {
          title: "Ladang Singkong",
          images: [
              "/Imagery/Pertanian Desa/Singkong/1_Singkong.webp",
              "/Imagery/Pertanian Desa/Singkong/2_Singkong.webp",
              "/Imagery/Pertanian Desa/Singkong/3_Singkong.webp",
              "/Imagery/Pertanian Desa/Singkong/4_Singkong.webp"
          ]
      },
      padi: {
          title: "Persawahan Padi",
          images: [
              "/Imagery/Pertanian Desa/Padi/1_Padi.webp",
              "/Imagery/Pertanian Desa/Padi/2_Padi.webp",
              "/Imagery/Pertanian Desa/Padi/3_Padi.webp",
              "/Imagery/Pertanian Desa/Padi/4_Padi.webp",
              "/Imagery/Pertanian Desa/Padi/5_Padi.webp",
              "/Imagery/Pertanian Desa/Padi/6_Padi.webp"
          ]
      },
      sawit: {
          title: "Kebun Kelapa Sawit",
          images: [
              "/Imagery/Pertanian Desa/Sawit/1_Sawit.webp",
              "/Imagery/Pertanian Desa/Sawit/2_Sawit.webp",
              "/Imagery/Pertanian Desa/Sawit/3_Sawit.webp",
              "/Imagery/Pertanian Desa/Sawit/4_Sawit.webp",
              "/Imagery/Pertanian Desa/Sawit/5_Sawit.webp",
              "/Imagery/Pertanian Desa/Sawit/6_Sawit.webp",
              "/Imagery/Pertanian Desa/Sawit/7_Sawit.webp",
              "/Imagery/Pertanian Desa/Sawit/8_Sawit.webp"
          ]
      },
      karet: {
          title: "Hutan Karet",
          images: [
              "/Imagery/Pertanian Desa/Karet/1_Karet.webp",
              "/Imagery/Pertanian Desa/Karet/2_Karet.webp",
              "/Imagery/Pertanian Desa/Karet/3_Karet.webp",
              "/Imagery/Pertanian Desa/Karet/4_Karet.webp"
          ]
      }
  };

  let instances = [];

  function renderAllSections() {
      const mainArea = document.getElementById('main-content-area');
      if(!mainArea) return;
      
      mainArea.innerHTML = ''; 
      // Cleanup old instances if any
      instances.forEach(i => i.destroy && i.destroy());
      instances = []; 

      for (const [key, data] of Object.entries(commodityData)) {
          const section = document.createElement('section');
          section.id = key;
          section.className = 'program-section';

          section.innerHTML = `
              <div class="program-title-wrapper" style="padding-bottom: 15px;">
                  <h3 class="program-title">
                      ${data.title}
                  </h3>
              </div>
              <div class="slideshow-wrapper" id="slideshow-${key}"></div>
          `;
          mainArea.appendChild(section);
          
          // Inisialisasi Global Slideshow
          const slideshow = new GlobalSlideshow(`slideshow-${key}`, data.images);
          instances.push(slideshow);
      }
  }

  document.addEventListener('DOMContentLoaded', () => {
      renderAllSections();
  });
</script>