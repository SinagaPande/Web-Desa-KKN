---
import DecorativeStrip from './DecorativeStrip.astro';

// Daftar Gambar Background
const backgrounds = [
    "/Imagery/sugarcane_bg.webp",
    "/Imagery/sugarcane_bg2.webp"
];

// Daftar Logo untuk Slideshow
const logos = [
    "/Imagery/lampung_siger_traditional.webp", // Logo 1 (Siger - Index 0)
    "/Imagery/Logo_LampungUtara.webp"          // Logo 2 (Lampung Utara - Index 1)
];
---

<header class="relative w-full h-[85vh] md:h-screen overflow-hidden flex flex-col items-center justify-center border-b-4 border-lampung-gold group">
    
    <div class="absolute inset-0 w-full h-full z-0">
        {backgrounds.map((bg, index) => (
            <img 
                src={bg} 
                alt={`Background ${index + 1}`} 
                class={`
                    absolute inset-0 w-full h-full object-cover object-center 
                    transition-opacity duration-[2000ms] ease-in-out
                    ${index === 0 ? 'opacity-100' : 'opacity-0'} 
                    bg-slide
                `}
                data-index={index}
            />
        ))}

        <div class="absolute inset-0 bg-gradient-to-b from-lampung-dark/90 via-lampung-dark/60 to-lampung-dark/90 z-10"></div>
        <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/batik-embossed.png')] z-10"></div>
    </div>

    <div class="relative z-20 text-center px-4 max-w-5xl mx-auto flex flex-col items-center gap-4 md:gap-6 mt-10">
        
    <div class="relative animate-float h-16 md:h-28 lg:h-36 w-full flex justify-center items-center mb-2">
        {logos.map((logo, index) => (
            <img 
                src={logo} 
                alt={`Logo Hero ${index + 1}`} 
                class={`
                    absolute w-auto object-contain 
                    drop-shadow-[0_10px_20px_rgba(240,198,92,0.5)] filter brightness-110
                    transition-opacity duration-[1000ms] ease-in-out
                    
                    /* LOGIKA TRANSISI AWAL */
                    ${index === 0 ? 'opacity-100 relative z-10' : 'opacity-0 z-0'} 
                    
                    /* === CUSTOM STYLING PER LOGO === */

                    /* 1. Siger (Index 0): Horizontal 1710x562
                    Diperkecil agar lebih proporsional secara horizontal */
                    ${index === 0 ? 'h-[100%] md:h-[85%] scale-100' : ''}

                    /* 2. Lampung Utara (Index 1): Vertikal 928x1152
                    UKURAN TETAP (Tidak diubah sesuai instruksi) */
                    ${index === 1 ? 'h-full scale-[2.4] -translate-y-5 md:scale-[1.6] md:-translate-y-4' : ''}

                    logo-slide
                `}
            />
        ))}
    </div>

        <div class="space-y-2 md:space-y-4">
            <h2 class="text-lampung-bone text-[10px] md:text-sm tracking-[0.4em] font-serif uppercase opacity-90 mb-2 drop-shadow-md">
                Selamat Datang di Website Resmi
            </h2>
            
            <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-lampung-bone via-white to-lampung-bone tracking-wide uppercase leading-tight font-serif drop-shadow-2xl">
                Desa <br class="md:hidden" /> Sukadana Ilir
            </h1>

            <div class="flex items-center justify-center gap-4 mt-4">
                <span class="h-[1px] w-8 md:w-20 bg-lampung-gold/70 shadow-[0_0_10px_#f0c65c]"></span>
                <p class="text-lampung-gold text-xs md:text-base tracking-widest uppercase font-serif font-bold drop-shadow-lg">
                    {/* REVISI: Kec. -> Kecamatan */}
                    Kecamatan Bunga Mayang â€¢ Lampung Utara
                </p>
                <span class="h-[1px] w-8 md:w-20 bg-lampung-gold/70 shadow-[0_0_10px_#f0c65c]"></span>
            </div>
        </div>
    </div>

    <div class="absolute bottom-0 w-full z-30 bg-gradient-to-t from-black via-black/60 to-transparent pt-12 pb-4">
        <div class="opacity-100 scale-90 md:scale-100">
            <DecorativeStrip />
        </div>
    </div>

</header>

<style>
    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
    }
    .animate-float {
        animation: float 6s ease-in-out infinite;
    }
</style>

<script>
    // --- 1. Script Slideshow BACKGROUND ---
    const bgSlides = document.querySelectorAll('.bg-slide');
    let currentBgSlide = 0;
    const totalBgSlides = bgSlides.length;
    const bgIntervalTime = 5000;

    function nextBgSlide() {
        if(bgSlides.length === 0) return;
        bgSlides[currentBgSlide].classList.remove('opacity-100');
        bgSlides[currentBgSlide].classList.add('opacity-0');
        
        currentBgSlide = (currentBgSlide + 1) % totalBgSlides;
        
        bgSlides[currentBgSlide].classList.remove('opacity-0');
        bgSlides[currentBgSlide].classList.add('opacity-100');
    }

    if (bgSlides.length > 1) {
        setInterval(nextBgSlide, bgIntervalTime);
    }

    // --- 2. Script Slideshow LOGO ---
    const logoSlides = document.querySelectorAll('.logo-slide');
    let currentLogoSlide = 0;
    const totalLogoSlides = logoSlides.length;
    const logoIntervalTime = 4000;

    function nextLogoSlide() {
        if(logoSlides.length === 0) return;
        // Hide current
        logoSlides[currentLogoSlide].classList.remove('opacity-100', 'relative', 'z-10');
        logoSlides[currentLogoSlide].classList.add('opacity-0', 'z-0');
        
        // Move next
        currentLogoSlide = (currentLogoSlide + 1) % totalLogoSlides;
        
        // Show next
        logoSlides[currentLogoSlide].classList.remove('opacity-0', 'z-0');
        logoSlides[currentLogoSlide].classList.add('opacity-100', 'relative', 'z-10');
    }

    if (logoSlides.length > 1) {
        setTimeout(() => {
            setInterval(nextLogoSlide, logoIntervalTime);
        }, 1000);
    }
</script>